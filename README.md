# æ™ºèƒ½æ–°é—»æ¨é€ç³»ç»Ÿ (Smart News Push System)

## ğŸ“° é¡¹ç›®æ¦‚è¿°

æ™ºèƒ½æ–°é—»æ¨é€ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºPythonçš„è‡ªåŠ¨åŒ–ç›‘æ§å’Œæ¨é€ç³»ç»Ÿï¼Œèƒ½å¤Ÿå®æ—¶è·å–å›½é™…æ–°é—»ã€ç›‘æ§è‚¡ç¥¨ä»·æ ¼ï¼Œå¹¶é€šè¿‡WhatsAppç­‰å¹³å°è¿›è¡Œæ™ºèƒ½æ¨é€ã€‚ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œæ”¯æŒæ•…éšœè‡ªåŠ¨è½¬ç§»ã€å¥åº·ç›‘æ§å’Œæ™ºèƒ½è°ƒåº¦ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- **å¤šæºæ–°é—»èšåˆ**: é›†æˆ36ä¸ªå›½é™…æ–°é—»æºï¼ŒåŒ…æ‹¬BBCã€CNNã€é‡‘èæ—¶æŠ¥ã€æ¾æ¹ƒæ–°é—»ç­‰
- **å®æ—¶è‚¡ç¥¨ç›‘æ§**: ç›‘æ§é˜¿é‡Œå·´å·´ã€å°ç±³ã€æ¯”äºšè¿ªç­‰çƒ­é—¨è‚¡ç¥¨å®æ—¶ä»·æ ¼
- **æ™ºèƒ½æ¨é€è°ƒåº¦**: åŸºäºæ—¶é—´çš„æ™ºèƒ½æ¨é€ç­–ç•¥ï¼ˆæ–°é—»: 8:00-22:00, è‚¡ç¥¨: 8:00-18:00ï¼‰
- **å¥åº·ç›‘æ§ç³»ç»Ÿ**: åŸºäºsituation-monitoræ¶æ„çš„å®æ—¶å¥åº·æ£€æŸ¥å’Œå‘Šè­¦
- **æ•…éšœè‡ªåŠ¨è½¬ç§»**: ä¸»å¤‡ç³»ç»Ÿè‡ªåŠ¨åˆ‡æ¢ï¼Œç¡®ä¿æ¨é€å¯é æ€§
- **æ¨¡å—åŒ–è®¾è®¡**: æ˜“äºæ‰©å±•å’Œç»´æŠ¤çš„æ¨¡å—åŒ–æ¶æ„

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
æ™ºèƒ½æ–°é—»æ¨é€ç³»ç»Ÿ
â”œâ”€â”€ ğŸ“Š æ–°é—»ç›‘æ§æ¨¡å— (News Monitoring)
â”‚   â”œâ”€â”€ å¤šæºæ–°é—»èšåˆå™¨
â”‚   â”œâ”€â”€ æ™ºèƒ½æ–‡ç« åˆ†ç±»å™¨ï¼ˆ8ç§ç±»å‹ï¼‰
â”‚   â”œâ”€â”€ é‡è¦æ€§è¯„çº§ç³»ç»Ÿï¼ˆ1-5çº§ï¼‰
â”‚   â””â”€â”€ å†…å®¹å»é‡å’Œç¼“å­˜
â”‚
â”œâ”€â”€ ğŸ“ˆ è‚¡ç¥¨ç›‘æ§æ¨¡å— (Stock Monitoring)
â”‚   â”œâ”€â”€ å®æ—¶è‚¡ä»·è·å–
â”‚   â”œâ”€â”€ æ¶¨è·Œå¹…è®¡ç®—
â”‚   â”œâ”€â”€ æŠ€æœ¯æŒ‡æ ‡åˆ†æ
â”‚   â””â”€â”€ å¼‚å¸¸æ³¢åŠ¨æ£€æµ‹
â”‚
â”œâ”€â”€ ğŸ¥ å¥åº·ç›‘æ§ç³»ç»Ÿ (Health Monitoring)
â”‚   â”œâ”€â”€ situation-monitoræ¶æ„
â”‚   â”œâ”€â”€ æ•°æ®åº“è¿æ¥æ£€æŸ¥
â”‚   â”œâ”€â”€ æ¶ˆæ¯å¹³å°å¯ç”¨æ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ ç³»ç»Ÿèµ„æºç›‘æ§
â”‚   â””â”€â”€ æ™ºèƒ½å‘Šè­¦å‡çº§
â”‚
â”œâ”€â”€ ğŸ“± æ¶ˆæ¯æ¨é€æ¨¡å— (Message Delivery)
â”‚   â”œâ”€â”€ WhatsAppæ¨é€
â”‚   â”œâ”€â”€ æ¶ˆæ¯æ ¼å¼åŒ–
â”‚   â”œâ”€â”€ æ¨é€è°ƒåº¦
â”‚   â””â”€â”€ å¤±è´¥é‡è¯•æœºåˆ¶
â”‚
â””â”€â”€ ğŸ”§ ç³»ç»Ÿåè°ƒå™¨ (System Coordinator)
    â”œâ”€â”€ æ™ºèƒ½ä¸»å¤‡åˆ‡æ¢
    â”œâ”€â”€ å®šæ—¶ä»»åŠ¡ç®¡ç†
    â”œâ”€â”€ è¿è¡ŒçŠ¶æ€ç›‘æ§
    â””â”€â”€ æ—¥å¿—å’Œç»Ÿè®¡
```

### æ•°æ®æµå‘

```
å®šæ—¶è§¦å‘ (æ¯å°æ—¶æ•´ç‚¹)
â”œâ”€â”€ smart_push.sh (åè°ƒå™¨)
â”‚   â”œâ”€â”€ ä¸»ç³»ç»Ÿ: new_push_system.py (åŸºäºsituation-monitor)
â”‚   â””â”€â”€ å¤‡ä»½ç³»ç»Ÿ: simple_push_system.py (ç®€åŒ–ç‰ˆ)
â””â”€â”€ æ¨é€ç»“æœ â†’ WhatsApp

ç›‘æ§æ¨é€ (æ¯å°æ—¶ç¬¬15åˆ†é’Ÿ)
â””â”€â”€ situation_monitor/run_situation_monitor_push.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- OpenClaw (ç”¨äºWhatsAppæ¶ˆæ¯å‘é€)
- SQLite3 (ç”¨äºæ•°æ®ç¼“å­˜)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/xuefeng19988/news_push.git
   cd news_push
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   pip install -r requirements.txt
   ```

3. **é…ç½®ç¯å¢ƒ**
   ```bash
   cp config/.env.example config/.env
   # ç¼–è¾‘config/.envæ–‡ä»¶ï¼Œå¡«å†™ä½ çš„é…ç½®
   ```

4. **é…ç½®OpenClaw**
   - ç¡®ä¿OpenClawå·²å®‰è£…å¹¶é…ç½®WhatsApp
   - æ›´æ–°config/.envä¸­çš„`WHATSAPP_NUMBER`å’Œ`OPENCLAW_PATH`

5. **è¿è¡Œæµ‹è¯•**
   ```bash
   python3 src/situation_monitor/new_push_system.py --dry-run
   ```

### å®šæ—¶ä»»åŠ¡é…ç½®

ç³»ç»Ÿä½¿ç”¨cronè¿›è¡Œå®šæ—¶è°ƒåº¦ï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹ä»»åŠ¡
# ä¸»æ¨é€ç³»ç»Ÿï¼ˆæ¯å°æ—¶æ•´ç‚¹ï¼‰
0 * * * * cd /path/to/news_push && /bin/bash smart_push.sh >> logs/smart_coordinator.log 2>&1

# ç›‘æ§æ¨é€ï¼ˆæ¯å°æ—¶ç¬¬15åˆ†é’Ÿï¼‰
15 * * * * cd /path/to/news_push && python3 src/situation_monitor/run_situation_monitor_push.py >> logs/situation_monitor_push.log 2>&1
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
news_push/
â”œâ”€â”€ src/                            # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ common/                     # å…¬å…±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ news_stock_pusher_optimized.py    # æ–°é—»è‚¡ç¥¨æ¨é€å™¨
â”‚   â”‚   â”œâ”€â”€ auto_push_system_optimized_final.py # æ—§ç‰ˆæ¨é€ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ simple_push_system.py   # ç®€åŒ–ç‰ˆæ¨é€ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ base_pusher.py          # æ¨é€å™¨åŸºç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ stocks/                     # è‚¡ç¥¨ç›‘æ§æ¨¡å—
â”‚   â”‚   â””â”€â”€ multi_stock_monitor.py  # å¤šè‚¡ç¥¨ç›‘æ§å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ news/                       # æ–°é—»å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ situation_monitor_sources.py  # æ–°é—»æºé…ç½®
â”‚   â”‚   â””â”€â”€ get_china_news.py       # ä¸­å›½æ–°é—»è·å–
â”‚   â”‚
â”‚   â”œâ”€â”€ monitoring/                 # ç›‘æ§æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ health_check.py         # å¥åº·æ£€æŸ¥
â”‚   â”‚   â”œâ”€â”€ monitor_dashboard.py    # ç›‘æ§é¢æ¿
â”‚   â”‚   â””â”€â”€ alert_escalation.py     # å‘Šè­¦å‡çº§
â”‚   â”‚
â”‚   â”œâ”€â”€ situation_monitor/          # situation-monitoræ¶æ„
â”‚   â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ checks/                 # æ£€æŸ¥æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ alerts/                 # å‘Šè­¦æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ integration/            # é›†æˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ new_push_system.py      # æ–°ç‰ˆæ¨é€ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ run_situation_monitor_push.py  # ç›‘æ§æ¨é€è¿è¡Œè„šæœ¬
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                      # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.py               # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ logger.py               # æ—¥å¿—å·¥å…·
â”‚   â”‚   â”œâ”€â”€ message_sender.py       # æ¶ˆæ¯å‘é€å™¨
â”‚   â”‚   â””â”€â”€ database.py             # æ•°æ®åº“å·¥å…·
â”‚   â”‚
â”‚   â””â”€â”€ analytics/                  # æ•°æ®åˆ†ææ¨¡å—
â”‚       â”œâ”€â”€ trend_analyzer.py       # è¶‹åŠ¿åˆ†æ
â”‚       â”œâ”€â”€ stock_indicator_calculator.py  # è‚¡ç¥¨æŒ‡æ ‡è®¡ç®—
â”‚       â””â”€â”€ visualization_generator.py      # å¯è§†åŒ–ç”Ÿæˆ
â”‚
â”œâ”€â”€ config/                         # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”‚   â””â”€â”€ *.json                     # JSONé…ç½®æ–‡ä»¶ç¤ºä¾‹
â”‚
â”œâ”€â”€ logs/                          # æ—¥å¿—ç›®å½•ï¼ˆgitå¿½ç•¥ï¼‰
â”œâ”€â”€ smart_push.sh                  # æ™ºèƒ½æ¨é€åè°ƒå™¨è„šæœ¬
â”œâ”€â”€ requirements.txt               # Pythonä¾èµ–
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ .gitignore                     # Gitå¿½ç•¥æ–‡ä»¶
```

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡ (.env)

```bash
# WhatsAppé…ç½®
WHATSAPP_NUMBER="+1234567890"      # æ¥æ”¶æ¨é€çš„WhatsAppå·ç 
OPENCLAW_PATH="/path/to/openclaw"  # OpenClawå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„

# æ¨é€æ—¶é—´é…ç½®
STOCK_PUSH_START=8                 # è‚¡ç¥¨æ¨é€å¼€å§‹æ—¶é—´ (08:00)
STOCK_PUSH_END=18                  # è‚¡ç¥¨æ¨é€ç»“æŸæ—¶é—´ (18:00)
NEWS_PUSH_START=8                  # æ–°é—»æ¨é€å¼€å§‹æ—¶é—´ (08:00)
NEWS_PUSH_END=22                   # æ–°é—»æ¨é€ç»“æŸæ—¶é—´ (22:00)

# æ—¥å¿—é…ç½®
LOG_LEVEL="INFO"                   # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR
LOG_DIR="./logs"                   # æ—¥å¿—ç›®å½•

# APIå¯†é’¥é…ç½®ï¼ˆå¯é€‰ï¼‰
TWITTER_API_KEY=""                 # Twitter APIå¯†é’¥
WEIBO_API_KEY=""                   # å¾®åšAPIå¯†é’¥
NEWS_API_KEY=""                    # NewsAPIå¯†é’¥
```

### æ–°é—»æºé…ç½®

ç³»ç»Ÿæ”¯æŒ36ä¸ªæ–°é—»æºï¼ŒåŒ…æ‹¬ï¼š

1. **å›½é™…åª’ä½“**: BBC News, CNN International, Reuters, Financial Times
2. **ä¸­æ–‡åª’ä½“**: æ¾æ¹ƒæ–°é—», æ–°æµªæ–°é—», ç½‘æ˜“æ–°é—»
3. **ç¤¾äº¤åª’ä½“**: Twitter, å¾®åš, Reddit
4. **ä¸“ä¸šåª’ä½“**: Bloomberg, The Economist, Business Insider
5. **ç§‘æŠ€åª’ä½“**: Ars Technica, The Verge, Hacker News, Techmeme

æ–°é—»æºé…ç½®ä½äº `src/news/situation_monitor_sources.py`ï¼Œå¯è½»æ¾æ·»åŠ æˆ–ä¿®æ”¹ã€‚

## ğŸ”§ ä½¿ç”¨æŒ‡å—

### æ‰‹åŠ¨è¿è¡Œæ¨é€

```bash
# è¿è¡Œæ–°ç‰ˆæ¨é€ç³»ç»Ÿï¼ˆå¹²è·‘æ¨¡å¼ï¼‰
python3 src/situation_monitor/new_push_system.py --dry-run

# è¿è¡Œæ–°ç‰ˆæ¨é€ç³»ç»Ÿï¼ˆå®é™…æ¨é€ï¼‰
python3 src/situation_monitor/new_push_system.py

# è¿è¡Œå¤‡ä»½ç³»ç»Ÿ
python3 src/common/simple_push_system.py --run

# è¿è¡Œåè°ƒå™¨è„šæœ¬
bash smart_push.sh
```

### å¥åº·æ£€æŸ¥

```bash
# è¿è¡Œå¥åº·æ£€æŸ¥
python3 -c "from src.monitoring.health_check import HealthChecker; hc = HealthChecker(); print(hc.check_quick())"

# æŸ¥çœ‹ç›‘æ§é¢æ¿
python3 -c "from src.monitoring.monitor_dashboard import MonitorDashboard; md = MonitorDashboard(); print(md.display_compact())"
```

### æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

```bash
# æŸ¥çœ‹æ¨é€ç»Ÿè®¡
python3 src/situation_monitor/new_push_system.py --stats
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ–°é—»æº

1. ç¼–è¾‘ `src/news/situation_monitor_sources.py`
2. åœ¨ `get_all_news_sources()` å‡½æ•°ä¸­æ·»åŠ æ–°çš„æ–°é—»æº
3. æ ¼å¼ç¤ºä¾‹ï¼š
   ```python
   {
       "name": "åª’ä½“åç§°",
       "url": "RSSæˆ–APIåœ°å€",
       "type": "åª’ä½“ç±»å‹",  # international, chinese, finance, tech
       "language": "è¯­è¨€",  # en, zh
       "category": "ç±»åˆ«",  # news, business, tech, finance
       "priority": ä¼˜å…ˆçº§   # 1-5ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜
   }
   ```

### æ‰©å±•ç›‘æ§æ£€æŸ¥

1. åœ¨ `src/situation_monitor/checks/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ£€æŸ¥ç±»
2. ç»§æ‰¿ `BaseCheck` ç±»
3. å®ç° `check()` æ–¹æ³•
4. åœ¨ `create_default_checks()` å‡½æ•°ä¸­æ³¨å†Œæ£€æŸ¥

### æ·»åŠ æ–°çš„æ¶ˆæ¯å¹³å°

1. åœ¨ `src/utils/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„æ¶ˆæ¯å‘é€å™¨
2. å®ç°æ ‡å‡†çš„æ¶ˆæ¯å‘é€æ¥å£
3. åœ¨é…ç½®ä¸­æ·»åŠ ç›¸åº”çš„ç¯å¢ƒå˜é‡
4. åœ¨æ¨é€ç³»ç»Ÿä¸­é›†æˆæ–°çš„å‘é€å™¨

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **æ–°é—»è·å–æ—¶é—´**: < 5ç§’ (36ä¸ªæ–°é—»æºå¹¶å‘è·å–)
- **å¥åº·æ£€æŸ¥æ—¶é—´**: < 0.3ç§’ (4é¡¹æ£€æŸ¥)
- **æ¨é€æˆåŠŸç‡**: > 95% (ä¸»å¤‡ç³»ç»Ÿä¿éšœ)
- **ç³»ç»Ÿå¯ç”¨æ€§**: 24/7 (æ•…éšœè‡ªåŠ¨è½¬ç§»)

## ğŸ”„ ç‰ˆæœ¬å†å²

### v0.2.1 (å½“å‰ç‰ˆæœ¬)
- âœ… è¿ç§»åˆ°situation-monitoræ¶æ„
- âœ… æ–°ç‰ˆæ¨é€ç³»ç»Ÿé›†æˆå¥åº·ç›‘æ§
- âœ… æ™ºèƒ½ä¸»å¤‡åˆ‡æ¢æœºåˆ¶
- âœ… ä¼˜åŒ–æ–°é—»æºè¿æ¥æ€§ï¼ˆ75%å¯ç”¨æ€§ï¼‰

### v0.2.0
- âœ… å¤šæºæ–°é—»èšåˆï¼ˆ36ä¸ªæ–°é—»æºï¼‰
- âœ… å®æ—¶è‚¡ç¥¨ç›‘æ§ï¼ˆ3åªçƒ­é—¨è‚¡ç¥¨ï¼‰
- âœ… æ™ºèƒ½æ–‡ç« åˆ†ç±»å’Œé‡è¦æ€§è¯„çº§
- âœ… åŸºç¡€å¥åº·æ£€æŸ¥ç³»ç»Ÿ

### v0.1.0
- âœ… åŸºç¡€æ¨é€åŠŸèƒ½
- âœ… WhatsAppæ¶ˆæ¯å‘é€
- âœ… ç®€å•æ–°é—»è·å–

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## ğŸ“ æ”¯æŒä¸åé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- åˆ›å»º [GitHub Issue](https://github.com/xuefeng19988/news_push/issues)
- æäº¤ Pull Request
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£

---

**æ™ºèƒ½æ–°é—»æ¨é€ç³»ç»Ÿ** - è®©ä¿¡æ¯è§¦æ‰‹å¯åŠ ğŸŒ¸